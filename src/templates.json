[
    {
        "name": "Kubernetes Namespaces Cost Breakdown (Clone)",
        "url": "Kubernetes-Namespaces-Cost-Breakdown-Clone",
        "description": "",
        "eventFilterType": "NONE",
        "eventQuery": "",
        "defaultTimeWindow": "2h",
        "displayDescription": false,
        "displaySectionTableOfContents": true,
        "displayQueryParameters": true,
        "hideChartWarning": false,
        "chartTitleScalar": 0,
        "sections": [
          {
            "name": "Cluster Overview",
            "id": "Kubernetes-Namespaces-Cost-Breakdown-section-1",
            "rows": [
              {
                "charts": [
                  {
                    "chartSettings": {
                      "type": "markdown-widget",
                      "plainMarkdownContent": "PURE ESTIMATION",
                      "showValueColumn": true,
                      "autoColumnTags": false,
                      "defaultSortColumn": null,
                      "sparklineDisplayColor": null,
                      "sparklineLineColor": null,
                      "sparklineFillColor": null
                    },
                    "includeObsoleteMetrics": false,
                    "name": "WARNING",
                    "units": "Units",
                    "base": 0,
                    "chartAttributes": {
                      "dashboardLayout": {
                        "x": 0,
                        "y": 0,
                        "w": 5,
                        "h": 7
                      }
                    },
                    "sources": [
                      {
                        "name": "A",
                        "query": "",
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": true,
                        "querybuilderSerialization": "{\"_v\":1,\"metric\":\"\",\"filters\":[[],\"and\"],\"functions\":[]}",
                        "sourceDescription": "",
                        "scatterPlotSource": "Y"
                      }
                    ],
                    "noDefaultEvents": false
                  },
                  {
                    "chartSettings": {
                      "y1ScaleSIBy1024": false,
                      "fixedLegendEnabled": false,
                      "fixedLegendFilterField": "CURRENT",
                      "y0ScaleSIBy1024": false,
                      "sparklineDisplayFontSize": "200",
                      "fixedLegendFilterLimit": 5,
                      "fixedLegendShowSourceName": true,
                      "sparklineValueColorMapColors": [
                        "rgba(56,160,244,1)",
                        "rgba(56,160,244,1)"
                      ],
                      "showValueColumn": true,
                      "fixedLegendPosition": "RIGHT",
                      "customTags": [],
                      "lineType": "linear",
                      "sparklineFillColor": "rgba(0,0,0,0)",
                      "sparklineValueColorMapApplyTo": "BACKGROUND",
                      "windowing": "full",
                      "sparklineDisplayColor": "rgba(255,255,255,1)",
                      "sparklineSize": "BACKGROUND",
                      "fixedLegendFilterSort": "TOP",
                      "sparklineValueColorMapValuesV2": [
                        1
                      ],
                      "y1Units": "",
                      "fixedLegendShowMetricName": false,
                      "sparklineDisplayValueType": "VALUE",
                      "type": "sparkline",
                      "y1UnitAutoscaling": false,
                      "sparklineValueTextMapText": [
                        "new highest"
                      ],
                      "tagMode": "all",
                      "fixedLegendUseRawStats": false,
                      "y0UnitAutoscaling": false,
                      "fixedLegendDisplayStats": [
                        "CURRENT"
                      ],
                      "sparklineDisplayHorizontalPosition": "MIDDLE",
                      "sparklineLineColor": "rgba(0,0,0,0)",
                      "sparklineDecimalPrecision": 0,
                      "autoColumnTags": false,
                      "numTags": 4,
                      "defaultSortColumn": null
                    },
                    "includeObsoleteMetrics": false,
                    "name": "New Chart",
                    "base": 0,
                    "chartAttributes": {
                      "lineFill": 1,
                      "singleStat": {
                        "sparklineDisplayLabel": "A",
                        "sparklineDisplaySubLabel": "Active Nodes"
                      },
                      "dashboardLayout": {
                        "x": 5,
                        "y": 0,
                        "w": 3,
                        "h": 4
                      },
                      "y0ScaleDecimal": true
                    },
                    "sources": [
                      {
                        "name": "A",
                        "query": "align(1m, count(ts(\"kubernetes.node.memory.usage\", cluster=\"${cluster_name}\")))",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "A Clone",
                        "query": "ts(\"kubernetes.node.memory.usage\", cluster=\"${cluster_name}\")",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      }
                    ],
                    "noDefaultEvents": false
                  },
                  {
                    "chartSettings": {
                      "y1ScaleSIBy1024": false,
                      "fixedLegendEnabled": false,
                      "fixedLegendFilterField": "CURRENT",
                      "y0ScaleSIBy1024": false,
                      "sparklineDisplayFontSize": "200",
                      "fixedLegendFilterLimit": 5,
                      "sparklineDisplayPrefix": "$",
                      "fixedLegendShowSourceName": true,
                      "sparklineValueColorMapColors": [
                        "rgba(56,160,244,1)",
                        "rgba(56,160,244,1)"
                      ],
                      "showValueColumn": true,
                      "fixedLegendPosition": "RIGHT",
                      "customTags": [],
                      "lineType": "linear",
                      "sparklineFillColor": "rgba(0,0,0,0)",
                      "sparklineValueColorMapApplyTo": "BACKGROUND",
                      "windowing": "full",
                      "sparklineDisplayColor": "rgba(255,255,255,1)",
                      "sparklineSize": "BACKGROUND",
                      "fixedLegendFilterSort": "TOP",
                      "sparklineValueColorMapValuesV2": [
                        1
                      ],
                      "y1Units": "",
                      "fixedLegendShowMetricName": false,
                      "sparklineDisplayValueType": "VALUE",
                      "type": "sparkline",
                      "y1UnitAutoscaling": false,
                      "sparklineValueTextMapText": [
                        "new highest"
                      ],
                      "tagMode": "all",
                      "fixedLegendUseRawStats": false,
                      "y0UnitAutoscaling": false,
                      "fixedLegendDisplayStats": [
                        "CURRENT"
                      ],
                      "sparklineDisplayHorizontalPosition": "MIDDLE",
                      "sparklineLineColor": "rgba(0,0,0,0)",
                      "sparklineDecimalPrecision": 2,
                      "autoColumnTags": false,
                      "numTags": 4,
                      "defaultSortColumn": null
                    },
                    "includeObsoleteMetrics": false,
                    "name": "New Chart",
                    "base": 0,
                    "chartAttributes": {
                      "lineFill": 1,
                      "singleStat": {
                        "sparklineDisplayLabel": "A",
                        "sparklineDisplaySubLabel": "Total Cost per Month"
                      },
                      "dashboardLayout": {
                        "x": 8,
                        "y": 0,
                        "w": 4,
                        "h": 4
                      },
                      "y0ScaleDecimal": false
                    },
                    "sources": [
                      {
                        "name": "A",
                        "query": "",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": true,
                        "querybuilderSerialization": "{\"metric\":\"ts()\",\"metricType\":\"m\",\"filters\":[[],\"and\"],\"functions\":[],\"_v\":1}"
                      },
                      {
                        "name": "alloc_cpu_cores",
                        "query": "aliasMetric(ts(\"kubernetes.node.cpu.node_capacity\", cluster=\"${cluster_name}\"), \"CPU Cores\")/1000",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "alloc_mem_bytes",
                        "query": "aliasMetric( ts(\"kubernetes.node.memory.node_capacity\", cluster=\"${cluster_name}\" )/(1024 * 1024 *1024), \"Memory GB\")",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "A",
                        "query": "sum(at('end',aliasMetric((${alloc_cpu_cores}*${_cpu_cost}[+]${alloc_mem_bytes}*${_memory_per_GB})*730, 'Total Cost per month ($)')))",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      }
                    ],
                    "noDefaultEvents": false
                  }
                ],
                "heightFactor": 100
              },
              {
                "charts": [
                  {
                    "chartSettings": {
                      "y1ScaleSIBy1024": false,
                      "fixedLegendEnabled": false,
                      "fixedLegendFilterField": "CURRENT",
                      "y0ScaleSIBy1024": false,
                      "sparklineDisplayFontSize": "200",
                      "fixedLegendFilterLimit": 5,
                      "sparklineDisplayPostfix": "%",
                      "fixedLegendShowSourceName": true,
                      "sparklineValueColorMapColors": [
                        "rgba(56,160,244,1)",
                        "rgba(56,160,244,1)"
                      ],
                      "showValueColumn": true,
                      "fixedLegendPosition": "RIGHT",
                      "customTags": [],
                      "lineType": "linear",
                      "sparklineFillColor": "rgba(0,0,0,0)",
                      "sparklineValueColorMapApplyTo": "BACKGROUND",
                      "windowing": "full",
                      "sparklineDisplayColor": "rgba(255,255,255,1)",
                      "sparklineSize": "BACKGROUND",
                      "fixedLegendFilterSort": "TOP",
                      "sparklineValueColorMapValuesV2": [
                        1
                      ],
                      "y1Units": "",
                      "fixedLegendShowMetricName": false,
                      "sparklineDisplayValueType": "VALUE",
                      "type": "sparkline",
                      "y1UnitAutoscaling": false,
                      "sparklineValueTextMapText": [
                        "new highest"
                      ],
                      "tagMode": "all",
                      "fixedLegendUseRawStats": false,
                      "y0UnitAutoscaling": false,
                      "fixedLegendDisplayStats": [
                        "CURRENT"
                      ],
                      "sparklineDisplayHorizontalPosition": "MIDDLE",
                      "sparklineLineColor": "rgba(0,0,0,0)",
                      "sparklineDecimalPrecision": 1,
                      "autoColumnTags": false,
                      "numTags": 4,
                      "defaultSortColumn": null
                    },
                    "includeObsoleteMetrics": false,
                    "name": "New Chart",
                    "base": 0,
                    "chartAttributes": {
                      "lineFill": 1,
                      "singleStat": {
                        "sparklineDisplayLabel": "A",
                        "sparklineDisplaySubLabel": "Node CPU Utilization Avg"
                      },
                      "dashboardLayout": {
                        "x": 5,
                        "y": 4,
                        "w": 3,
                        "h": 3
                      },
                      "y0ScaleDecimal": false
                    },
                    "sources": [
                      {
                        "name": "utilization",
                        "query": "avg(align(60s, mean, ts(\"kubernetes.node.cpu.node_utilization\", cluster=\"${cluster_name}\"))) * 100",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      }
                    ],
                    "noDefaultEvents": false
                  },
                  {
                    "anomalySeverity": "medium",
                    "chartSettings": {
                      "y1ScaleSIBy1024": false,
                      "fixedLegendEnabled": false,
                      "fixedLegendFilterField": "CURRENT",
                      "y0ScaleSIBy1024": false,
                      "sparklineDisplayFontSize": "200",
                      "fixedLegendFilterLimit": 5,
                      "sparklineDisplayPostfix": "%",
                      "fixedLegendShowSourceName": true,
                      "sparklineValueColorMapColors": [
                        "rgba(56,160,244,1)",
                        "rgba(56,160,244,1)"
                      ],
                      "showValueColumn": true,
                      "fixedLegendPosition": "RIGHT",
                      "customTags": [],
                      "lineType": "linear",
                      "sparklineFillColor": "rgba(0,0,0,0)",
                      "sparklineValueColorMapApplyTo": "BACKGROUND",
                      "windowing": "full",
                      "sparklineDisplayColor": "rgba(255,255,255,1)",
                      "sparklineSize": "BACKGROUND",
                      "fixedLegendFilterSort": "TOP",
                      "sparklineValueColorMapValuesV2": [
                        1
                      ],
                      "y1Units": "",
                      "fixedLegendShowMetricName": false,
                      "sparklineDisplayValueType": "VALUE",
                      "type": "sparkline",
                      "y1UnitAutoscaling": false,
                      "sparklineValueTextMapText": [
                        "new highest"
                      ],
                      "tagMode": "all",
                      "fixedLegendUseRawStats": false,
                      "y0UnitAutoscaling": false,
                      "fixedLegendDisplayStats": [
                        "CURRENT"
                      ],
                      "sparklineDisplayHorizontalPosition": "MIDDLE",
                      "sparklineLineColor": "rgba(0,0,0,0)",
                      "sparklineDecimalPrecision": 1,
                      "autoColumnTags": false,
                      "numTags": 4,
                      "defaultSortColumn": null
                    },
                    "displayConfidenceBounds": false,
                    "includeObsoleteMetrics": false,
                    "filterOutNonAnomalies": false,
                    "name": "New Chart",
                    "anomalySampleSize": "8",
                    "units": "",
                    "summarization": "MEAN",
                    "base": 0,
                    "chartAttributes": {
                      "lineFill": 1,
                      "singleStat": {
                        "sparklineDisplayLabel": "A",
                        "sparklineDisplaySubLabel": "Node Memory Utilization Avg"
                      },
                      "dashboardLayout": {
                        "x": 8,
                        "y": 4,
                        "w": 4,
                        "h": 3
                      },
                      "y0ScaleDecimal": false
                    },
                    "sources": [
                      {
                        "name": "utilization",
                        "query": "ts(\"kubernetes.node.memory.working_set\", cluster=\"${cluster_name}\")/ts(\"kubernetes.node.memory.node_allocatable\", cluster=\"${cluster_name}\")",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "avg_util",
                        "query": "avg(${utilization}) * 100",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      }
                    ],
                    "noDefaultEvents": false,
                    "anomalyType": "both"
                  }
                ],
                "heightFactor": 50
              },
              {
                "charts": [
                  {
                    "anomalySeverity": "medium",
                    "anomalyDetectionOn": false,
                    "chartSettings": {
                      "y1ScaleSIBy1024": false,
                      "fixedLegendEnabled": false,
                      "fixedLegendFilterField": "CURRENT",
                      "y0ScaleSIBy1024": false,
                      "fixedLegendFilterLimit": 5,
                      "fixedLegendShowSourceName": true,
                      "showValueColumn": true,
                      "fixedLegendPosition": "RIGHT",
                      "customTags": [
                        "nodename",
                        "label.node.kubernetes.io/instance-type"
                      ],
                      "showRawValues": false,
                      "lineType": "linear",
                      "showHosts": false,
                      "groupBySource": true,
                      "windowing": "full",
                      "defaultSortColumn": "tags[\"label.beta.kubernetes.io/instance-type\"]",
                      "fixedLegendFilterSort": "TOP",
                      "y1Units": "",
                      "sortValuesDescending": true,
                      "fixedLegendShowMetricName": false,
                      "type": "table",
                      "y1UnitAutoscaling": false,
                      "showLabels": false,
                      "tagMode": "custom",
                      "fixedLegendUseRawStats": false,
                      "y0UnitAutoscaling": false,
                      "fixedLegendDisplayStats": [
                        "CURRENT"
                      ],
                      "autoColumnTags": false,
                      "numTags": 4,
                      "sparklineDisplayColor": null,
                      "sparklineLineColor": null,
                      "sparklineFillColor": null
                    },
                    "displayConfidenceBounds": false,
                    "includeObsoleteMetrics": false,
                    "filterOutNonAnomalies": false,
                    "name": "Capacity CPU & Memory",
                    "anomalySampleSize": "8",
                    "units": "",
                    "summarization": "MEAN",
                    "base": 0,
                    "chartAttributes": {
                      "lineFill": 1,
                      "dashboardLayout": {
                        "x": 0,
                        "y": 7,
                        "w": 12,
                        "h": 4
                      }
                    },
                    "sources": [
                      {
                        "name": "alloc_cpu_cores",
                        "query": "aliasMetric(ts(\"kubernetes.node.cpu.node_capacity\", cluster=\"${cluster_name}\"), \"CPU Cores\")/1000",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false,
                        "sourceDescription": ""
                      },
                      {
                        "name": "alloc_mem_bytes",
                        "query": "aliasMetric( ts(\"kubernetes.node.memory.node_capacity\", cluster=\"${cluster_name}\" )/(1024 * 1024 *1024), \"Memory GB\")",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false,
                        "sourceDescription": ""
                      },
                      {
                        "name": "A",
                        "query": "aliasMetric(((${alloc_cpu_cores}*${_cpu_cost})[+](${alloc_mem_bytes}*${_memory_per_GB})), 'Total Cost per hour ($)')",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false,
                        "sourceDescription": ""
                      },
                      {
                        "name": "A Clone 2",
                        "query": "aliasMetric(((${alloc_cpu_cores}*${_cpu_cost})[+](${alloc_mem_bytes}*${_memory_per_GB}))*24, 'Total Cost per day ($)')",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false,
                        "sourceDescription": ""
                      },
                      {
                        "name": "A Clone",
                        "query": "aliasMetric((${alloc_cpu_cores}*${_cpu_cost}[+]${alloc_mem_bytes}*${_memory_per_GB})*730, 'Total Cost per month ($)')",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false,
                        "sourceDescription": ""
                      }
                    ],
                    "noDefaultEvents": false,
                    "anomalyType": "both"
                  }
                ],
                "heightFactor": 80
              },
              {
                "charts": [
                  {
                    "anomalySeverity": "medium",
                    "chartSettings": {
                      "y1ScaleSIBy1024": false,
                      "fixedLegendEnabled": true,
                      "fixedLegendFilterField": "CURRENT",
                      "y0ScaleSIBy1024": false,
                      "fixedLegendFilterLimit": 5,
                      "fixedLegendShowSourceName": true,
                      "showValueColumn": true,
                      "fixedLegendPosition": "RIGHT",
                      "customTags": [],
                      "showRawValues": false,
                      "lineType": "linear",
                      "showHosts": false,
                      "groupBySource": true,
                      "windowing": "full",
                      "invertDynamicLegendHoverControl": false,
                      "fixedLegendFilterSort": "TOP",
                      "y1Units": "",
                      "sortValuesDescending": true,
                      "fixedLegendShowMetricName": false,
                      "type": "table",
                      "y1UnitAutoscaling": false,
                      "showLabels": true,
                      "tagMode": "all",
                      "fixedLegendUseRawStats": false,
                      "y0UnitAutoscaling": false,
                      "fixedLegendDisplayStats": [
                        "CURRENT"
                      ],
                      "autoColumnTags": false,
                      "numTags": 4,
                      "defaultSortColumn": null,
                      "sparklineDisplayColor": null,
                      "sparklineLineColor": null,
                      "sparklineFillColor": null
                    },
                    "displayConfidenceBounds": false,
                    "includeObsoleteMetrics": false,
                    "filterOutNonAnomalies": false,
                    "name": "Monthly Cost by Namespace",
                    "anomalySampleSize": "8",
                    "units": "",
                    "summarization": "MAX",
                    "base": 0,
                    "chartAttributes": {
                      "lineFill": 1,
                      "dashboardLayout": {
                        "x": 0,
                        "y": 11,
                        "w": 12,
                        "h": 4
                      }
                    },
                    "sources": [
                      {
                        "name": "CPU Usage",
                        "query": "aliasMetric(aliasSource(sum(align(60m, mean, ts(\"kubernetes.ns.cpu.usage_rate\", cluster=\"${cluster_name}\" and namespace_name=\"${namespace}\")), namespace_name), \"{{namespace_name}}\"), \"CPU Usage\")/1000",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "Memory Usage",
                        "query": "aliasMetric(aliasSource(sum(align(60m, mean, ts(\"kubernetes.ns.memory.usage\", cluster=\"${cluster_name}\" and namespace_name=\"${namespace}\")), namespace_name), \"{{namespace_name}}\"), \"Memory Usage\")/(1024 * 1024 *1024)",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "CPU Request",
                        "query": "aliasMetric(aliasSource(sum(align(60m, mean, ts(\"kubernetes.ns.cpu.request\", cluster=\"${cluster_name}\"  and namespace_name=\"${namespace}\")), namespace_name), \"{{namespace_name}}\"), \"CPU Request\")/1000",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "Memory Request",
                        "query": "aliasMetric(aliasSource(sum(align(60m, mean, ts(\"kubernetes.ns.memory.request\", cluster=\"${cluster_name}\"  and namespace_name=\"${namespace}\")), namespace_name), \"{{namespace_name}}\"), \"Memory Request\")/(1024 * 1024 *1024)",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "CPU Limit",
                        "query": "aliasMetric(aliasSource(sum(align(60m, mean, ts(\"kubernetes.ns.cpu.limit\", cluster=\"${cluster_name}\"  and namespace_name=\"${namespace}\")), namespace_name), \"{{namespace_name}}\"), \"CPU Limit\")/1000",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "Memory Limit",
                        "query": "aliasMetric(aliasSource(sum(align(60m, mean, ts(\"kubernetes.ns.memory.limit\", cluster=\"${cluster_name}\"  and namespace_name=\"${namespace}\")), namespace_name), \"{{namespace_name}}\"), \"Memory Limit\")/(1024 * 1024 *1024)",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "A",
                        "query": "aliasMetric((${CPU Usage}*${_cpu_cost}[+]${Memory Usage}*${_memory_per_GB})*730, 'Total Usage Cost per month ($)')",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "A Clone",
                        "query": "aliasMetric((${CPU Request}*${_cpu_cost}[+]${Memory Request}*${_memory_per_GB})*730, 'Total Request Cost per month ($)')",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "A Clone 2",
                        "query": "aliasMetric((${CPU Limit}*${_cpu_cost}[+]${Memory Limit}*${_memory_per_GB})*730, 'Total Limit Cost per month ($)')",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      }
                    ],
                    "noDefaultEvents": false,
                    "anomalyType": "both"
                  }
                ],
                "heightFactor": 80
              }
            ],
            "sectionFilter": null
          },
          {
            "name": "PODS",
            "id": "Kubernetes-Namespaces-Cost-Breakdown-section-2",
            "rows": [
              {
                "charts": [
                  {
                    "anomalySeverity": "medium",
                    "chartSettings": {
                      "y1ScaleSIBy1024": false,
                      "fixedLegendEnabled": false,
                      "fixedLegendFilterField": "CURRENT",
                      "y0ScaleSIBy1024": false,
                      "fixedLegendFilterLimit": 5,
                      "fixedLegendShowSourceName": true,
                      "showValueColumn": true,
                      "fixedLegendPosition": "RIGHT",
                      "customTags": [
                        "pod_name"
                      ],
                      "showRawValues": true,
                      "lineType": "linear",
                      "showHosts": false,
                      "groupBySource": true,
                      "windowing": "full",
                      "defaultSortColumn": "value_% of Used",
                      "fixedLegendFilterSort": "TOP",
                      "y1Units": "",
                      "sortValuesDescending": true,
                      "fixedLegendShowMetricName": false,
                      "type": "table",
                      "y1UnitAutoscaling": false,
                      "showLabels": false,
                      "tagMode": "custom",
                      "fixedLegendUseRawStats": false,
                      "y0UnitAutoscaling": false,
                      "fixedLegendDisplayStats": [
                        "CURRENT"
                      ],
                      "autoColumnTags": false,
                      "numTags": 4,
                      "sparklineDisplayColor": null,
                      "sparklineLineColor": null,
                      "sparklineFillColor": null
                    },
                    "displayConfidenceBounds": false,
                    "includeObsoleteMetrics": false,
                    "filterOutNonAnomalies": false,
                    "name": "PODs Cost Breakdown",
                    "anomalySampleSize": "8",
                    "units": "",
                    "summarization": "LAST",
                    "base": 0,
                    "chartAttributes": {
                      "lineFill": 1,
                      "dashboardLayout": {
                        "x": 0,
                        "y": 0,
                        "w": 12,
                        "h": 3
                      }
                    },
                    "sources": [
                      {
                        "name": "cpu_used",
                        "query": "max(ts(\"kubernetes.pod.cpu.usage_rate\", cluster=\"${cluster_name}\" and namespace_name=\"${namespace}\" and type=\"pod\"), sources, pod_name).gt(0)",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "memory_used",
                        "query": "max(ts(\"kubernetes.pod.memory.usage\", cluster=\"${cluster_name}\" and namespace_name=\"${namespace}\" and type=\"pod\"), sources, pod_name).gt(0) ",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "cpu_request",
                        "query": "max(ts(\"kubernetes.pod.cpu.request\", cluster=\"${cluster_name}\" and namespace_name=\"${namespace}\" and type=\"pod\"), sources, pod_name).gt(0)",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "memory_request",
                        "query": "max(ts(\"kubernetes.pod.memory.request\", cluster=\"${cluster_name}\" and namespace_name=\"${namespace}\" and type=\"pod\"), sources, pod_name).gt(0)  ",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "cpu_limit",
                        "query": "aliasMetric(mavg(1vw,ts(\"kubernetes.pod.cpu.limit\", cluster=\"${cluster_name}\" and namespace_name=\"${namespace}\" and type=\"pod\").gt(0)), \"Limit\")",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "memory_limit",
                        "query": "aliasMetric(mavg(1vw,ts(\"kubernetes.pod.memory.limit\", cluster=\"${cluster_name}\" and namespace_name=\"${namespace}\" and type=\"pod\").gt(0)), \"Limit\") ",
                        "disabled": true,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "cpu",
                        "query": "join(\r\n${cpu_used} AS ts1 LEFT OUTER JOIN ${${_cpu_cost_basis}} AS ts2 USING(source, pod_name),\r\n  metric='${_cpu_cost_basis} (Cores)', pod_name=ts1.pod_name, source=ts2.source,\r\n  (ts2 / 1000 ) \r\n  )\r\n  ",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "memory",
                        "query": "join(\r\n${memory_used} AS ts1 LEFT OUTER JOIN ${${_memory_cost_basis}} AS ts2 USING(source, pod_name),\r\n  metric='${_memory_cost_basis} (GB)', pod_name=ts1.pod_name, source=ts2.source,\r\n  (ts2 / (1024 * 1024 *1024)) \r\n  )\r\n  ",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "cpu cost",
                        "query": "aliasMetric( ${cpu} * ${_cpu_cost} * 24,'${_cpu_cost_basis} per 24 hr ($)' )",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "memory cost",
                        "query": "aliasMetric( ${memory} * ${_memory_per_GB} * 24,'${_memory_cost_basis} per 24 hr ($)' )",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "total cost",
                        "query": "aliasMetric((${cpu cost} [+] ${memory cost}), 'Total Cost per day ($)')",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      },
                      {
                        "name": "total cost Clone",
                        "query": "aliasMetric((${total cost}) * 30, 'Total Cost per month ($)')",
                        "disabled": false,
                        "secondaryAxis": false,
                        "queryType": "WQL",
                        "querybuilderEnabled": false
                      }
                    ],
                    "noDefaultEvents": false,
                    "description": "The number of Available, Desired and Ready replicas per deployment.",
                    "anomalyType": "both"
                  }
                ],
                "heightFactor": 50
              }
            ],
            "sectionFilter": null
          }
        ],
        "parameterDetails": {
          "_cpu_cost": {
            "parameterType": "SIMPLE",
            "order": 4,
            "defaultValue": "Label",
            "hideFromView": false,
            "label": "CPU per hr (USD)",
            "valuesToReadableStrings": {
              "Label": "0.02558"
            },
            "allowAll": false
          },
          "cluster_name": {
            "tagsBlackListRegex": "",
            "parameterType": "DYNAMIC",
            "tagKey": "cluster",
            "queryValue": "collect(max(ts(\"kubernetes.cluster.cpu.limit\"), cluster), taggify(1, cluster, \"*\"))",
            "order": 1,
            "defaultValue": "Label_2",
            "hideFromView": false,
            "value": "aks_us_east_001",
            "label": "cluster",
            "dynamicFieldType": "TAG_KEY",
            "valuesToReadableStrings": {
              "Label": "*",
              "Label_2": "aks_us_east_001"
            },
            "allowAll": false,
            "selectedLabel": "Label_2"
          },
          "_cost_basis": {
            "parameterType": "LIST",
            "valueOrdering": [
              "limit",
              "request",
              "used"
            ],
            "order": 3,
            "defaultValue": "used",
            "hideFromView": false,
            "label": "basis",
            "valuesToReadableStrings": {
              "limit": "limit",
              "request": "request",
              "used": "used"
            },
            "allowAll": false
          },
          "namespace": {
            "tagsBlackListRegex": "",
            "parameterType": "DYNAMIC",
            "tagKey": "namespace_name",
            "queryValue": "collect(ts(\"kubernetes.ns.memory.usage\", cluster=\"${cluster_name}\"), taggify(1, namespace_name, \"*\"))",
            "order": 2,
            "defaultValue": "Label_4",
            "hideFromView": false,
            "value": "kube-system",
            "label": "namespace",
            "dynamicFieldType": "TAG_KEY",
            "valuesToReadableStrings": {
              "Label": "*",
              "Label_2": "default",
              "Label_3": "dynatrace",
              "Label_4": "kube-system",
              "Label_5": "observability-system",
              "Label_6": "otelm-aks-demo"
            },
            "allowAll": false,
            "selectedLabel": "Label_4"
          },
          "namespaces_metric": {
            "parameterType": "SIMPLE",
            "order": 8,
            "defaultValue": "Label",
            "hideFromView": true,
            "label": "namespaces_metric",
            "valuesToReadableStrings": {
              "Label": "CPU Usage"
            },
            "allowAll": false
          },
          "_memory_per_GB": {
            "parameterType": "SIMPLE",
            "order": 5,
            "defaultValue": "Label",
            "hideFromView": false,
            "label": "Mem per hr (USD)",
            "valuesToReadableStrings": {
              "Label": "0.006883393"
            },
            "allowAll": false
          },
          "_cpu_cost_basis": {
            "parameterType": "SIMPLE",
            "valueOrdering": [
              "limit",
              "request",
              "used"
            ],
            "order": 6,
            "defaultValue": "Label",
            "hideFromView": true,
            "label": "_cpu_cost_basis",
            "valuesToReadableStrings": {
              "Label": "cpu_${_cost_basis}"
            },
            "allowAll": false
          },
          "_memory_cost_basis": {
            "parameterType": "SIMPLE",
            "valueOrdering": [
              "limit",
              "request",
              "used"
            ],
            "order": 7,
            "defaultValue": "Label",
            "hideFromView": true,
            "label": "_memory_cost_basis",
            "valuesToReadableStrings": {
              "Label": "memory_${_cost_basis}"
            },
            "allowAll": false
          }
        },
        "forceV2UI": true,
        "disableRefreshInLiveMode": false
      }
]